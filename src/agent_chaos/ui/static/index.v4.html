<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>agent-chaos Â· Chaos Engineering for AI Agents</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="stylesheet" href="/static/styles.v4.css?v=4.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="/static/favicon.svg" alt="agent-chaos logo" class="logo-icon">
            <span class="logo-text">agent-chaos</span>
        </div>
        <div class="header-stats" id="headerStats">
            <!-- Dynamic stats populated by JS -->
        </div>
        <div class="header-controls">
            <button class="theme-toggle" id="themeToggle" title="Toggle theme">ðŸŒ™</button>
            <div class="status-indicator disconnected" id="statusBadge">
                <div class="status-dot"></div>
                <span id="statusText">Connecting...</span>
            </div>
        </div>
    </header>
    
    <main class="main">
        <!-- Narrative Summary Bar -->
        <div class="summary-bar" id="summaryBar">
            <span class="summary-narrative" id="summaryNarrative">Waiting for chaos runs...</span>
        </div>

        <!-- Scenarios Section -->
        <section class="scenarios-section">
            <div class="section-header">
                <h2 class="section-title">Scenarios <span class="section-count" id="scenarioCount">0</span></h2>
                <div class="filter-groups">
                    <div class="view-toggle" id="viewToggle">
                        <button class="view-btn active" data-view="grid" title="Grid view">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <rect x="1" y="1" width="6" height="6" rx="1"/>
                                <rect x="9" y="1" width="6" height="6" rx="1"/>
                                <rect x="1" y="9" width="6" height="6" rx="1"/>
                                <rect x="9" y="9" width="6" height="6" rx="1"/>
                            </svg>
                        </button>
                        <button class="view-btn" data-view="list" title="List view">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <rect x="1" y="2" width="14" height="2" rx="0.5"/>
                                <rect x="1" y="7" width="14" height="2" rx="0.5"/>
                                <rect x="1" y="12" width="14" height="2" rx="0.5"/>
                            </svg>
                        </button>
                    </div>
                    <div class="filter-dropdown-wrapper" id="groupDropdownWrapper">
                        <button class="filter-dropdown-trigger" id="groupDropdownTrigger" title="Group scenarios">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M1 3h14v2H1zM3 7h12v2H3zM3 11h12v2H3z"/>
                            </svg>
                            <span class="filter-label" id="groupLabel">Group</span>
                            <span class="filter-arrow">â–¾</span>
                        </button>
                        <div class="filter-dropdown" id="groupDropdown">
                            <button class="filter-option" data-mode="none">None</button>
                            <button class="filter-option" data-mode="tags">By Tag</button>
                            <button class="filter-option active" data-mode="parent">By Parent</button>
                        </div>
                    </div>
                    <div class="filter-dropdown-wrapper" id="statusDropdownWrapper">
                        <button class="filter-dropdown-trigger" id="statusDropdownTrigger" title="Filter by status">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                <circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="2"/>
                                <path d="M5 8l2 2 4-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="filter-label" id="statusLabel">Status</span>
                            <span class="filter-arrow">â–¾</span>
                        </button>
                        <div class="filter-dropdown" id="statusDropdown">
                            <button class="filter-option active" data-filter="all">All</button>
                            <button class="filter-option" data-filter="passed">Passed</button>
                            <button class="filter-option" data-filter="failed">Failed</button>
                        </div>
                    </div>
                    <div class="filter-dropdown-wrapper align-right" id="chaosTypeDropdownWrapper">
                        <button class="filter-dropdown-trigger" id="chaosTypeDropdownTrigger" title="Filter by chaos type">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 1l1.5 3.5L13 5l-2.5 2.5L11 12l-3-2-3 2 .5-4.5L3 5l3.5-.5z"/>
                            </svg>
                            <span class="filter-label" id="chaosTypeLabel">Chaos Type</span>
                            <span class="filter-arrow">â–¾</span>
                        </button>
                        <div class="filter-dropdown" id="chaosTypeDropdown">
                            <button class="filter-option active" data-type="all">All Types</button>
                            <button class="filter-option" data-type="none">None (Baseline)</button>
                            <button class="filter-option" data-type="user_input">User Input</button>
                            <button class="filter-option" data-type="llm">LLM Call</button>
                            <button class="filter-option" data-type="stream">LLM Streaming</button>
                            <button class="filter-option" data-type="tool">Tools</button>
                            <button class="filter-option" data-type="context">Context</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="scenarios-grid" id="scenariosGrid">
                <div class="empty-state" id="emptyState">
                    <div class="empty-icon">ðŸŽ²</div>
                    <h3 class="empty-title">Awaiting Chaos...</h3>
                    <p class="empty-text">
                        Run your agent with chaos scenarios or use 
                        <code>chaos_context("test", emit_events=True)</code>
                    </p>
                </div>
            </div>
        </section>
    </main>

    <!-- Scenario Detail Modal with Conversation Timeline -->
    <div class="modal hidden" id="scenarioModal">
        <div class="modal-backdrop" id="modalBackdrop"></div>
        <div class="modal-panel">
            <div class="modal-header">
                <div class="modal-title-group">
                    <div class="modal-title" id="modalTitle">Scenario Details</div>
                    <div class="modal-subtitle" id="modalSubtitle"></div>
                </div>
                <button class="modal-close" id="modalClose">âœ•</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic conversation timeline content -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/static/app.v4.js?v=4.0"></script>
</body>
</html>

